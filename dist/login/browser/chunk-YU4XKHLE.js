import"./chunk-6R2GIPTN.js";import"./chunk-KSRAX7FU.js";import{a as N,b as p,c as T,d as A,e as j,f as w,g as M,h as R,l as V,m as D,n as G,o as O}from"./chunk-77I3R6LL.js";import{a as K}from"./chunk-DZ7CS7NK.js";import{a as z,b as H}from"./chunk-Q4OWNIY6.js";import{B as u,D as m,J as o,K as e,L as l,M as F,O as i,S as q,X as C,Y as E,ca as S,ea as I,ha as x,m as y,o as g,x as a,y as _}from"./chunk-YPJZ6ZRL.js";function U(r,n){r&1&&(o(0,"div",26),i(1," Titulo obligatorio "),e())}function J(r,n){r&1&&(o(0,"div",26),i(1," Nombre de usuario obligatorio "),e())}function L(r,n){r&1&&(o(0,"div",26),i(1," Apellido obligatorio "),e())}function P(r,n){r&1&&(o(0,"div",26),i(1," Clave obligatorio "),e())}function Q(r,n){r&1&&(o(0,"div",26),i(1," Cantidad de Copias obligatorio "),e())}function W(r,n){r&1&&(o(0,"div",26),i(1," Cantidad obligatorio "),e())}function X(r,n){r&1&&(o(0,"div",26),i(1," Topics obligatorio "),e())}var fe=(()=>{let n=class n{constructor(s,f,t){this.authService=s,this.fb=f,this.router=t,this.route=y(S),this.books=[],this.editBookForm=this.fb.group({title:["",p.required],author:["",p.required],isbn:["",p.required],publish_year:["",p.required],copies:["",p.required],quantity:["",p.required],topics:["",p.required]}),this.authService.getAllBooks().subscribe({next:d=>{this.books=d;let c=parseInt(this.route.snapshot.params.id,10);this.foundBook=this.books.find(b=>b.id===c),this.foundBook&&(this.editBookForm.patchValue({title:this.foundBook.title,author:this.foundBook.author,isbn:this.foundBook.isbn,publish_year:this.foundBook.publish_year,copies:this.foundBook.copies,quantity:this.foundBook.quantity,topics:this.foundBook.topics}),console.log(this.foundBook))},error:d=>{console.error(d)}})}getObjectKeys(s){return Object.keys(s)}editar(){let s={title:this.editBookForm.value.title??"",author:this.editBookForm.value.author??"",isbn:this.editBookForm.value.isbn??"",publish_year:this.editBookForm.value.publish_year??"",copies:this.editBookForm.value.copies??"",quantity:parseInt(this.editBookForm.value.quantity??0),topics:this.editBookForm.value.topics??""};this.authService.updateBook(this.foundBook.id,s).subscribe(f=>{this.router.navigate(["/welcome"])})}};n.\u0275fac=function(f){return new(f||n)(_(z),_(D),_(I))},n.\u0275cmp=g({type:n,selectors:[["app-book-information"]],standalone:!0,features:[q],decls:50,vars:9,consts:[[1,"after-header"],[1,"mb-2","text-center"],[1,"container","d-flex","justify-content-end"],["href","/welcome",1,"btn","btn-primary"],[1,"bi","bi-arrow-left-circle"],[1,"container"],["id","newUserForm",1,"container","pb-2",2,"width","400px","max-width","100%",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","title",1,"form-label"],["formControlName","title","required","","autocomplete","off","type","text","id","title",1,"form-control"],["class","validacion",4,"ngIf"],["for","author",1,"form-label"],["formControlName","author","required","","autocomplete","off","type","text","id","author",1,"form-control"],["for","isbn",1,"form-label"],["formControlName","isbn","required","","autocomplete","off","type","number","id","isbn",1,"form-control"],["for","publish_year",1,"form-label"],["formControlName","publish_year","required","","type","number","id","publish_year",1,"form-control"],["for","copies",1,"form-label"],["formControlName","copies","required","","type","number","id","copies",1,"form-control"],["for","quantity",1,"form-label"],["formControlName","quantity","required","","type","number","id","quantity",1,"form-control"],["for","topics",1,"form-label"],["formControlName","topics","required","","type","text","id","topics",1,"form-control"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","d-flex","gap-2",3,"disabled"],[1,"bi","bi-person-plus"],[1,"validacion"]],template:function(f,t){if(f&1&&(l(0,"app-header"),o(1,"div",0)(2,"h2",1),i(3,"Actualizar libro"),e(),o(4,"div",2)(5,"a",3),l(6,"i",4),i(7," Regresar"),e()(),o(8,"section",5)(9,"form",6),F("ngSubmit",function(){return t.editar()}),o(10,"div",7)(11,"label",8),i(12,"Titulo"),e(),l(13,"input",9),u(14,U,2,0,"div",10),o(15,"div",7)(16,"label",11),i(17,"Autor"),e(),l(18,"input",12),u(19,J,2,0,"div",10),e(),o(20,"div",7)(21,"label",13),i(22,"Isbn"),e(),l(23,"input",14),u(24,L,2,0,"div",10),e()(),o(25,"div",7)(26,"label",15),i(27,"A\xF1o de publicacion"),e(),l(28,"input",16),u(29,P,2,0,"div",10),e(),o(30,"div",7)(31,"label",17),i(32,"Copias"),e(),l(33,"input",18),u(34,Q,2,0,"div",10),e(),o(35,"div",7)(36,"label",19),i(37,"Cantidad"),e(),l(38,"input",20),u(39,W,2,0,"div",10),e(),o(40,"div",7)(41,"label",21),i(42,"Temas"),e(),l(43,"input",22),u(44,X,2,0,"div",10),e(),o(45,"div",23)(46,"button",24),l(47,"i",25),i(48,"Editar "),e()()()()(),l(49,"app-footer")),f&2){let d,c,b,h,v,k,B;a(9),m("formGroup",t.editBookForm),a(5),m("ngIf",((d=t.editBookForm.get("title"))==null?null:d.hasError("required"))&&((d=t.editBookForm.get("title"))==null?null:d.touched)),a(5),m("ngIf",((c=t.editBookForm.get("author"))==null?null:c.hasError("required"))&&((c=t.editBookForm.get("author"))==null?null:c.touched)),a(5),m("ngIf",((b=t.editBookForm.get("isbn"))==null?null:b.hasError("required"))&&((b=t.editBookForm.get("isbn"))==null?null:b.touched)),a(5),m("ngIf",((h=t.editBookForm.get("publish_year"))==null?null:h.hasError("required"))&&((h=t.editBookForm.get("publish_year"))==null?null:h.touched)),a(5),m("ngIf",((v=t.editBookForm.get("copies"))==null?null:v.hasError("required"))&&((v=t.editBookForm.get("copies"))==null?null:v.touched)),a(5),m("ngIf",((k=t.editBookForm.get("quantity"))==null?null:k.hasError("required"))&&((k=t.editBookForm.get("quantity"))==null?null:k.touched)),a(5),m("ngIf",((B=t.editBookForm.get("topics"))==null?null:B.hasError("required"))&&((B=t.editBookForm.get("topics"))==null?null:B.touched)),a(2),m("disabled",t.editBookForm.invalid)}},dependencies:[E,C,x,H,G,j,N,w,T,A,V,O,M,R,K],encapsulation:2});let r=n;return r})();export{fe as default};
